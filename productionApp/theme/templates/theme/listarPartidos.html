{% extends 'theme/base.html' %}

{% block title %}Lista de Fieiras Partidas{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-white mb-8">Fieiras Partidas</h1>

<div class="overflow-x-auto w-full max-w-6xl bg-white rounded-lg shadow-lg p-6">
    <table class="min-w-full table-auto text-xs md:text-sm text-left">
        <thead class="bg-blue-600 text-white uppercase font-semibold text-sm">
            <tr>
                <th class="px-4 py-3">QR Code</th>
                <th class="px-4 py-3">Partido</th>
                <th class="px-4 py-3">Série Dies Partidos</th>
                <th class="px-4 py-3">Criado em</th>
                <th class="px-4 py-3">Feito</th>
            </tr>
        </thead>
        <tbody class="text-gray-800">
            {% for numero_partido in numero_partidos %}
            <tr class="border-b hover:bg-gray-100 transition-colors">
                <td class="px-4 py-2">{{ numero_partido.qr_code.toma_order_nr }}</td>
                <td class="px-4 py-2">{{ numero_partido.partido }}</td>
                <td class="px-4 py-2">
                    {% if numero_partido.serie_dies_partidos %}
                        {{ numero_partido.serie_dies_partidos }}
                    {% else %}
                        <span class="text-gray-400 italic">Não especificado</span>
                    {% endif %}
                </td>
                <td class="px-4 py-2">{{ numero_partido.created_at|date:"d/m/Y H:i" }}</td>
                <td class="px-4 py-2 text-center">
                <form method="post" action="{% url 'editar_checkbox_partido' numero_partido.id %}">
                    {% csrf_token %}
                    <label class="inline-flex items-center gap-2">
                    <!-- name="checkbox" <- bate com a view -->
                    <input
                        type="checkbox"
                        name="checkbox"
                        class="h-4 w-4 accent-green-600"
                        {% if numero_partido.checkbox %}checked{% endif %}
                        onchange="this.form.submit()"
                    />
                    <span class="text-sm text-gray-700">
                        {% if numero_partido.checkbox %}Sim{% else %}Não{% endif %}
                    </span>
                    </label>
                </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-center text-gray-500 py-4">Nenhum partido cadastrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
